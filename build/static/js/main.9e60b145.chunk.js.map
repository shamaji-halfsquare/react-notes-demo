{"version":3,"sources":["libs/contextLib.js","libs/errorLib.js","containers/Home.js","containers/NotFound.js","components/LoaderButton.js","libs/hooksLib.js","containers/Login.js","containers/Signup.js","config.js","libs/awsLib.js","containers/NewNote.js","containers/Notes.js","components/BillingForm.js","containers/Settings.js","components/AuthenticatedRoute.js","components/UnauthenticatedRoute.js","Routes.js","App.js","reportWebVitals.js","index.js"],"names":["AppContext","createContext","useAppContext","useContext","onError","error","message","toString","Error","alert","Home","useState","notes","setNotes","isAuthenticated","isLoading","setIsLoading","loadNotes","API","get","renderNotesList","to","ListGroup","Item","action","className","size","map","noteId","content","createdAt","trim","split","Date","toLocaleString","useEffect","a","onLoad","NotFound","LoaderButton","disabled","props","Button","children","useFormFields","initialState","fields","setValues","event","target","id","value","Login","userHasAuthenticated","email","password","handleFieldChange","preventDefault","Auth","signIn","Form","onSubmit","Group","controlId","Label","Control","autoFocus","type","onChange","block","length","Signup","confirmPassword","confirmationCode","history","useHistory","newUser","setNewUser","handleSubmit","signUp","username","handleConfirmationSubmit","confirmSignUp","push","variant","Text","muted","config","STRIPE_KEY","MAX_ATTACHMENT_SIZE","s3","REGION","BUCKET","apiGateway","URL","cognito","USER_POOL_ID","APP_CLIENT_ID","IDENTITY_POOL_ID","s3Upload","file","filename","now","name","Storage","vault","put","contentType","stored","key","NewNote","useRef","setContent","current","attachment","createNote","note","post","body","as","e","files","Notes","str","useParams","setNote","isDeleting","setIsDeleting","saveNote","deleteNote","del","window","confirm","loadNote","attachmentURL","rel","href","replace","onClick","injectStripe","storage","isProcessing","setIsProcessing","isCardComplete","setIsCardComplete","stripe","createToken","token","min","placeholder","complete","style","base","fontSize","color","fontFamily","Settings","setStripe","billUser","details","source","Stripe","fonts","cssSrc","AuthenticatedRoute","rest","useLocation","pathname","search","UnauthenticatedRoute","redirect","url","location","results","RegExp","exec","decodeURIComponent","querystring","Routes","exact","path","App","isAuthenticating","setIsAuthenticating","currentSession","signOut","Navbar","collapseOnSelect","bg","expand","Brand","Toggle","Collapse","Nav","activeKey","Link","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Amplify","configure","mandatorySignIn","region","userPoolId","identityPoolId","userPoolWebClientId","bucket","endpoints","endpoint","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9e60b145.chunk.js","sourcesContent":["import { useContext, createContext } from \"react\";\n\nexport const AppContext = createContext(null);\n\nexport function useAppContext() {\n  return useContext(AppContext);\n}","export function onError(error) {\n  let message = error.toString();\n\n  // Auth errors\n  if (!(error instanceof Error) && error.message) {\n    message = error.message;\n  }\n\n  alert(message);\n}","import React, { useState, useEffect } from \"react\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Home.css\";\nimport { API } from \"aws-amplify\";\nimport { BsPencilSquare } from \"react-icons/bs\";\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nexport default function Home() {\n  const [notes, setNotes] = useState([]);\n  const { isAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const notes = await loadNotes();\n        setNotes(notes);\n      } catch (e) {\n        onError(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  function loadNotes() {\n    return API.get(\"notes\", \"/notes\");\n  }\n\n  function renderNotesList(notes) {\n    return (\n      <>\n        <LinkContainer to=\"/notes/new\">\n          <ListGroup.Item action className=\"py-3 text-nowrap text-truncate\">\n            <BsPencilSquare size={17} />\n            <span className=\"ml-2 font-weight-bold\">Create a new note</span>\n          </ListGroup.Item>\n        </LinkContainer>\n        {notes.map(({ noteId, content, createdAt }) => (\n          <LinkContainer key={noteId} to={`/notes/${noteId}`}>\n            <ListGroup.Item action>\n              <span className=\"font-weight-bold\">\n                {content.trim().split(\"\\n\")[0]}\n              </span>\n              <br />\n              <span className=\"text-muted\">\n                Created: {new Date(createdAt).toLocaleString()}\n              </span>\n            </ListGroup.Item>\n          </LinkContainer>\n        ))}\n      </>\n    );\n  }\n\n  function renderLander() {\n    return (\n      <div className=\"lander\">\n        <h1>Scratch</h1>\n        <p className=\"text-muted\">A simple note taking app</p>\n      </div>\n    );\n  }\n\n  function renderNotes() {\n    return (\n      <div className=\"notes\">\n        <h2 className=\"pb-3 mt-4 mb-3 border-bottom\">Your Notes</h2>\n        <ListGroup>{!isLoading && renderNotesList(notes)}</ListGroup>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Home\">\n      {isAuthenticated ? renderNotes() : renderLander()}\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./NotFound.css\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"NotFound text-center\">\n      <h3>Sorry, page not found!</h3>\n    </div>\n  );\n}","import React from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport { BsArrowRepeat } from \"react-icons/bs\";\nimport \"./LoaderButton.css\";\n\nexport default function LoaderButton({\n  isLoading,\n  className = \"\",\n  disabled = false,\n  ...props\n}) {\n  return (\n    <Button\n      disabled={disabled || isLoading}\n      className={`LoaderButton ${className}`}\n      {...props}\n    >\n      {isLoading && <BsArrowRepeat className=\"spinning\" />}\n      {props.children}\n    </Button>\n  );\n}","import { useState } from \"react\";\n\nexport function useFormFields(initialState) {\n  const [fields, setValues] = useState(initialState);\n\n  return [\n    fields,\n    function (event) {\n      setValues({\n        ...fields,\n        [event.target.id]: event.target.value,\n      });\n    },\n  ];\n}\n","import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Login.css\";\nimport { Auth } from \"aws-amplify\";\nimport { useAppContext } from \"../libs/contextLib\";\n// import { useHistory } from \"react-router-dom\";\nimport { useFormFields } from \"../libs/hooksLib\";\nimport { onError } from \"../libs/errorLib\";\n\nexport default function Login() {\n  const [isLoading, setIsLoading] = useState(false);\n  // const history = useHistory();\n  const { userHasAuthenticated } = useAppContext();\n  // const [email, setEmail] = useState(\"\");\n  // const [password, setPassword] = useState(\"\");\n  const [fields, handleFieldChange] = useFormFields({\n    email: \"\",\n    password: \"\",\n  });\n\n  function validateForm() {\n    return fields.email.length > 0 && fields.password.length > 0;\n    // return true;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await Auth.signIn(fields.email, fields.password);\n      userHasAuthenticated(true);\n      // history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"Login\">\n      <Form onSubmit={handleSubmit}>\n        <Form.Group size=\"lg\" controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <Form.Group size=\"lg\" controlId=\"password\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <LoaderButton\n          block\n          size=\"lg\"\n          type=\"submit\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          {\" \"}\n          Login\n        </LoaderButton>\n      </Form>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { useHistory } from \"react-router-dom\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport { useFormFields } from \"../libs/hooksLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Signup.css\";\nimport { Auth } from \"aws-amplify\";\n\nexport default function Signup() {\n  const [fields, handleFieldChange] = useFormFields({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    confirmationCode: \"\",\n  });\n  const history = useHistory();\n  const [newUser, setNewUser] = useState(null);\n  const { userHasAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return (\n      fields.email.length > 0 &&\n      fields.password.length > 0 &&\n      fields.password === fields.confirmPassword\n    );\n  }\n\n  function validateConfirmationForm() {\n    return fields.confirmationCode.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n      const newUser = await Auth.signUp({\n        username: fields.email,\n        password: fields.password,\n      });\n      setIsLoading(false);\n      setNewUser(newUser);\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  async function handleConfirmationSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n      await Auth.confirmSignUp(fields.email, fields.confirmationCode);\n      await Auth.signIn(fields.email, fields.password);\n\n      userHasAuthenticated(true);\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  function renderConfirmationForm() {\n    return (\n      <Form onSubmit={handleConfirmationSubmit}>\n        <Form.Group controlId=\"confirmationCode\" size=\"lg\">\n          <Form.Label>Confirmation Code</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"tel\"\n            onChange={handleFieldChange}\n            value={fields.confirmationCode}\n          />\n          <Form.Text muted>Please check your email for the code.</Form.Text>\n        </Form.Group>\n        <LoaderButton\n          block\n          size=\"lg\"\n          type=\"submit\"\n          variant=\"success\"\n          isLoading={isLoading}\n          disabled={!validateConfirmationForm()}\n        >\n          Verify\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  function renderForm() {\n    return (\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"email\" size=\"lg\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"password\" size=\"lg\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"confirmPassword\" size=\"lg\">\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.confirmPassword}\n          />\n        </Form.Group>\n        <LoaderButton\n          block\n          size=\"lg\"\n          type=\"submit\"\n          variant=\"success\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Signup\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  return (\n    <div className=\"Signup\">\n      {newUser === null ? renderForm() : renderConfirmationForm()}\n    </div>\n  );\n}\n","const config = {\n  STRIPE_KEY:\n    \"pk_test_51JCzpgSChv1F0QSH57P7hikSUCS6F6IDpGre5WSvIBVyJipY4i6gQAFULJzAhhOaoYaH01So5rjR6gGi5G6TGzov00yUTViAtc\",\n  MAX_ATTACHMENT_SIZE: 5000000,\n  s3: {\n    REGION: \"us-east-2\",\n    BUCKET: \"nodejs-demo-upload\",\n  },\n  apiGateway: {\n    REGION: \"us-east-2\",\n    URL: \"https://4jglbe3c8k.execute-api.us-east-2.amazonaws.com/dev\",\n  },\n  cognito: {\n    REGION: \"us-east-2\",\n    USER_POOL_ID: \"us-east-2_FW6fu0RFP\",\n    APP_CLIENT_ID: \"3dterr46v981kdnkdeer6jp258\",\n    IDENTITY_POOL_ID: \"us-east-2:6d6913a6-d485-4bd3-bf1b-4d929e3cf6de\",\n  },\n};\n\nexport default config;\n","import { Storage } from \"aws-amplify\";\n\nexport async function s3Upload(file) {\n  const filename = `${Date.now()}-${file.name}`;\n\n  const stored = await Storage.vault.put(filename, file, {\n    contentType: file.type,\n  });\n\n  return stored.key;\n}\n","import React, { useRef, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { useHistory } from \"react-router-dom\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { onError } from \"../libs/errorLib\";\nimport config from \"../config\";\nimport \"./NewNote.css\";\nimport { s3Upload } from \"../libs/awsLib\";\nimport { API } from \"aws-amplify\";\n\nexport default function NewNote() {\n  const file = useRef(null);\n  const history = useHistory();\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return content.length > 0;\n  }\n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    if (file.current && file.current.size > config.MAX_ATTACHMENT_SIZE) {\n      alert(\n        `Please pick a file smaller than ${\n          config.MAX_ATTACHMENT_SIZE / 1000000\n        } MB.`\n      );\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const attachment = file.current ? await s3Upload(file.current) : null;\n\n      await createNote({ content, attachment });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n  function createNote(note) {\n    return API.post(\"notes\", \"/notes\", {\n      body: note,\n    });\n  }\n\n  return (\n    <div className=\"NewNote\">\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"content\">\n          <Form.Control\n            value={content}\n            as=\"textarea\"\n            onChange={(e) => setContent(e.target.value)}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"file\">\n          <Form.Label>Attachment</Form.Label>\n          <Form.Control onChange={handleFileChange} type=\"file\" />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          size=\"lg\"\n          variant=\"primary\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Create\n        </LoaderButton>\n      </Form>\n    </div>\n  );\n}\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport Form from \"react-bootstrap/Form\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport config from \"../config\";\nimport \"./Notes.css\";\nimport { s3Upload } from \"../libs/awsLib\";\n\nexport default function Notes() {\n  const file = useRef(null);\n  const { id } = useParams();\n  const history = useHistory();\n  const [note, setNote] = useState(null);\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  useEffect(() => {\n    function loadNote() {\n      return API.get(\"notes\", `/notes/${id}`);\n    }\n\n    async function onLoad() {\n      try {\n        const note = await loadNote();\n        const { content, attachment } = note;\n\n        if (attachment) {\n          note.attachmentURL = await Storage.vault.get(attachment);\n        }\n\n        setContent(content);\n        setNote(note);\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    onLoad();\n  }, [id]);\n\n  function validateForm() {\n    return content.length > 0;\n  }\n\n  function formatFilename(str) {\n    return str.replace(/^\\w+-/, \"\");\n  }\n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n  }\n\n  function saveNote(note) {\n    return API.put(\"notes\", `/notes/${id}`, {\n      body: note,\n    });\n  }\n\n  async function handleSubmit(event) {\n    let attachment;\n\n    event.preventDefault();\n\n    if (file.current && file.current.size > config.MAX_ATTACHMENT_SIZE) {\n      alert(\n        `Please pick a file smaller than ${\n          config.MAX_ATTACHMENT_SIZE / 1000000\n        } MB.`\n      );\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      if (file.current) {\n        attachment = await s3Upload(file.current);\n      }\n\n      await saveNote({\n        content,\n        attachment: attachment || note.attachment,\n      });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  function deleteNote() {\n    return API.del(\"notes\", `/notes/${id}`);\n  }\n\n  async function handleDelete(event) {\n    event.preventDefault();\n\n    const confirmed = window.confirm(\n      \"Are you sure you want to delete this note?\"\n    );\n\n    if (!confirmed) {\n      return;\n    }\n\n    setIsDeleting(true);\n\n    try {\n      await deleteNote();\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsDeleting(false);\n    }\n  }\n\n  return (\n    <div className=\"Notes\">\n      {note && (\n        <Form onSubmit={handleSubmit}>\n          <Form.Group controlId=\"content\">\n            <Form.Control\n              as=\"textarea\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"file\">\n            <Form.Label>Attachment</Form.Label>\n            {note.attachment && (\n              <p>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={note.attachmentURL}\n                >\n                  {formatFilename(note.attachment)}\n                </a>\n              </p>\n            )}\n            <Form.Control onChange={handleFileChange} type=\"file\" />\n          </Form.Group>\n          <LoaderButton\n            block\n            size=\"lg\"\n            type=\"submit\"\n            isLoading={isLoading}\n            disabled={!validateForm()}\n          >\n            Save\n          </LoaderButton>\n          <LoaderButton\n            block\n            size=\"lg\"\n            variant=\"danger\"\n            onClick={handleDelete}\n            isLoading={isDeleting}\n          >\n            Delete\n          </LoaderButton>\n        </Form>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { CardElement, injectStripe } from \"react-stripe-elements\";\nimport LoaderButton from \"./LoaderButton\";\nimport { useFormFields } from \"../libs/hooksLib\";\nimport \"./BillingForm.css\";\n\nfunction BillingForm({ isLoading, onSubmit, ...props }) {\n  const [fields, handleFieldChange] = useFormFields({\n    name: \"\",\n    storage: \"\",\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isCardComplete, setIsCardComplete] = useState(false);\n\n  isLoading = isProcessing || isLoading;\n\n  function validateForm() {\n    return fields.name !== \"\" && fields.storage !== \"\" && isCardComplete;\n  }\n\n  async function handleSubmitClick(event) {\n    event.preventDefault();\n\n    setIsProcessing(true);\n\n    const { token, error } = await props.stripe.createToken({\n      name: fields.name,\n    });\n\n    setIsProcessing(false);\n\n    onSubmit(fields.storage, { token, error });\n  }\n\n  return (\n    <Form className=\"BillingForm\" onSubmit={handleSubmitClick}>\n      <Form.Group size=\"lg\" controlId=\"storage\">\n        <Form.Label>Storage</Form.Label>\n        <Form.Control\n          min=\"0\"\n          type=\"number\"\n          value={fields.storage}\n          onChange={handleFieldChange}\n          placeholder=\"Number of notes to store\"\n        />\n      </Form.Group>\n      <hr />\n      <Form.Group size=\"lg\" controlId=\"name\">\n        <Form.Label>Cardholder&apos;s name</Form.Label>\n        <Form.Control\n          type=\"text\"\n          value={fields.name}\n          onChange={handleFieldChange}\n          placeholder=\"Name on the card\"\n        />\n      </Form.Group>\n      <Form.Label>Credit Card Info</Form.Label>\n      <CardElement\n        className=\"card-field\"\n        onChange={(e) => setIsCardComplete(e.complete)}\n        style={{\n          base: {\n            fontSize: \"16px\",\n            color: \"#495057\",\n            fontFamily: \"'Open Sans', sans-serif\",\n          },\n        }}\n      />\n      <LoaderButton\n        block\n        size=\"lg\"\n        type=\"submit\"\n        isLoading={isLoading}\n        disabled={!validateForm()}\n      >\n        Purchase\n      </LoaderButton>\n    </Form>\n  );\n}\n\nexport default injectStripe(BillingForm);\n","import React, { useState, useEffect } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { useHistory } from \"react-router-dom\";\nimport { onError } from \"../libs/errorLib\";\nimport config from \"../config\";\nimport { Elements, StripeProvider } from \"react-stripe-elements\";\nimport BillingForm from \"../components/BillingForm\";\nimport \"./Settings.css\";\n\nexport default function Settings() {\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [stripe, setStripe] = useState(null);\n\n  useEffect(() => {\n    setStripe(window.Stripe(config.STRIPE_KEY));\n  }, []);\n  function billUser(details) {\n    return API.post(\"notes\", \"/billing\", {\n      body: details,\n    });\n  }\n\n  async function handleFormSubmit(storage, { token, error }) {\n    if (error) {\n      onError(error);\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await billUser({\n        storage,\n        source: token.id,\n      });\n\n      alert(\"Your card has been charged successfully!\");\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"Settings\">\n      <StripeProvider stripe={stripe}>\n        <Elements\n          fonts={[\n            {\n              cssSrc:\n                \"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800\",\n            },\n          ]}\n        >\n          <BillingForm isLoading={isLoading} onSubmit={handleFormSubmit} />\n        </Elements>\n      </StripeProvider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\nimport { useAppContext } from \"../libs/contextLib\";\n\nexport default function AuthenticatedRoute({ children, ...rest }) {\n  const { pathname, search } = useLocation();\n  const { isAuthenticated } = useAppContext();\n  return (\n    <Route {...rest}>\n      {isAuthenticated ? (\n        children\n      ) : (\n        <Redirect to={`/login?redirect=${pathname}${search}`} />\n      )}\n    </Route>\n  );\n}\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useAppContext } from \"../libs/contextLib\";\n\nfunction querystring(name, url = window.location.href) {\n  name = name.replace(/[[]]/g, \"\\\\$&\");\n\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\", \"i\");\n  const results = regex.exec(url);\n\n  if (!results) {\n    return null;\n  }\n  if (!results[2]) {\n    return \"\";\n  }\n\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport default function UnauthenticatedRoute({ children, ...rest }) {\n  const { isAuthenticated } = useAppContext();\n  const redirect = querystring(\"redirect\");\n  return (\n    <Route {...rest}>\n      {!isAuthenticated ? (\n        children\n      ) : (\n        <Redirect to={redirect === \"\" || redirect === null ? \"/\" : redirect} />\n      )}\n    </Route>\n  );\n}\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Home from \"./containers/Home\";\nimport NotFound from \"./containers/NotFound\";\nimport Login from \"./containers/Login\";\nimport Signup from \"./containers/Signup\";\nimport NewNote from \"./containers/NewNote\";\nimport Notes from \"./containers/Notes\";\nimport Settings from \"./containers/Settings\";\nimport AuthenticatedRoute from \"./components/AuthenticatedRoute\";\nimport UnauthenticatedRoute from \"./components/UnauthenticatedRoute\";\n\nexport default function Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n      <UnauthenticatedRoute exact path=\"/login\">\n        <Login />\n      </UnauthenticatedRoute>\n      <UnauthenticatedRoute exact path=\"/signup\">\n        <Signup />\n      </UnauthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/settings\">\n        <Settings />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/notes/new\">\n        <NewNote />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/notes/:id\">\n        <Notes />\n      </AuthenticatedRoute>\n      {/* Finally, catch all unmatched routes */}\n      <Route>\n        <NotFound />\n      </Route>\n    </Switch>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport \"./App.css\";\nimport Routes from \"./Routes\";\nimport Nav from \"react-bootstrap/Nav\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { AppContext } from \"./libs/contextLib\";\nimport { Auth } from \"aws-amplify\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction App() {\n  const history = useHistory();\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    }\n    catch(e) {\n      if (e !== 'No current user') {\n        alert(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n  \n  async function handleLogout() {\n    await Auth.signOut();\n\n    userHasAuthenticated(false);\n    history.push(\"/login\");\n  }\n  \n  return (\n    !isAuthenticating && (\n      <div className=\"App container py-3\">\n        <Navbar collapseOnSelect bg=\"light\" expand=\"md\" className=\"mb-3\">\n          <LinkContainer to=\"/\">\n            <Navbar.Brand className=\"font-weight-bold text-muted\">\n              Scratch\n            </Navbar.Brand>\n          </LinkContainer>\n          <Navbar.Toggle />\n          <Navbar.Collapse className=\"justify-content-end\">\n            <Nav activeKey={window.location.pathname}>\n              {isAuthenticated ? (\n                <>\n                  <LinkContainer to=\"/settings\">\n                    <Nav.Link>Settings</Nav.Link>\n                  </LinkContainer>\n                  <Nav.Link onClick={handleLogout}>Logout</Nav.Link>\n                </>\n              ) : (\n                <>\n                  <LinkContainer to=\"/signup\">\n                    <Nav.Link>Signup</Nav.Link>\n                  </LinkContainer>\n                  <LinkContainer to=\"/login\">\n                    <Nav.Link>Login</Nav.Link>\n                  </LinkContainer>\n                </>\n              )}\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n          <Routes />\n        </AppContext.Provider>\n      </div>\n    )\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Amplify } from 'aws-amplify';\nimport config from './config';\n\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: config.cognito.REGION,\n    userPoolId: config.cognito.USER_POOL_ID,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: config.cognito.APP_CLIENT_ID\n  },\n  Storage: {\n    region: config.s3.REGION,\n    bucket: config.s3.BUCKET,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID\n  },\n  API: {\n    endpoints: [\n      {\n        name: \"notes\",\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n    ]\n  }\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}